{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useRef } from 'react';\nexport function useLocalStorage() {\n  _s();\n\n  const keyRef = useRef('');\n  const valueRef = useRef('');\n  const getValue = useCallback(() => {\n    if (typeof window === 'undefined') {\n      return null;\n    }\n\n    try {\n      const item = window.localStorage.getItem(keyRef.current);\n      return item ? JSON.parse(item) : null;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \"${keyRef.current}\": `, error);\n      return null;\n    }\n  }, [keyRef.current, valueRef.current]);\n  const setValue = useCallback((key, value) => {\n    keyRef.current = key;\n    window.localStorage.setItem(key, value);\n  }, [keyRef.current, valueRef.current]); // const [storedValue, setStoreValue] = useState<Value<T>>(readValue);\n  // useEffect(() => {\n  //   // setStoreValue(readValue());\n  //   localStorage\n  // }, []);\n  // const handleStorageChange = useCallback(\n  //   (event: StorageEvent | CustomEvent) => {\n  //     if ((event as StorageEvent)?.key && (event as StorageEvent).key !== key) {\n  //       return;\n  //     }\n  //     setStoreValue(readValue());\n  //   },\n  //   [key, readValue]\n  // );\n  // useEventListener('storage', handleStorageChange);\n  // useEventListener('local-storage', handleStorageChange);\n\n  return [getValue, setValue];\n}\n\n_s(useLocalStorage, \"KJARorLHv8FQVrS23oqUZgD75vU=\");","map":{"version":3,"names":["useCallback","useRef","useLocalStorage","keyRef","valueRef","getValue","window","item","localStorage","getItem","current","JSON","parse","error","console","warn","setValue","key","value","setItem"],"sources":["/home/user/Documents/coding/projects/todofeito-app/src/hooks/useLocalStorage.ts"],"sourcesContent":["import { useCallback, useEffect, useState, useRef } from 'react';\n\nimport { useEventListener } from './useEventListener';\n\ntype Value<T> = T | null;\n\ntype Return<T> = [() => Value<T>, (key: string, value: string) => void];\n\nexport function useLocalStorage<T>(): Return<T> {\n  const keyRef = useRef<string>('');\n  const valueRef = useRef<string>('');\n\n  const getValue = useCallback((): Value<T> => {\n    if (typeof window === 'undefined') {\n      return null;\n    }\n\n    try {\n      const item = window.localStorage.getItem(keyRef.current);\n      return item ? (JSON.parse(item) as T) : null;\n    } catch (error) {\n      console.warn(`Error reading localStorage key \"${keyRef.current}\": `, error);\n      return null;\n    }\n  }, [keyRef.current, valueRef.current]);\n\n  const setValue = useCallback(\n    (key: string, value: string) => {\n      keyRef.current = key;\n      window.localStorage.setItem(key, value);\n    },\n    [keyRef.current, valueRef.current]\n  );\n\n  // const [storedValue, setStoreValue] = useState<Value<T>>(readValue);\n\n  // useEffect(() => {\n  //   // setStoreValue(readValue());\n  //   localStorage\n  // }, []);\n\n  // const handleStorageChange = useCallback(\n  //   (event: StorageEvent | CustomEvent) => {\n  //     if ((event as StorageEvent)?.key && (event as StorageEvent).key !== key) {\n  //       return;\n  //     }\n  //     setStoreValue(readValue());\n  //   },\n  //   [key, readValue]\n  // );\n\n  // useEventListener('storage', handleStorageChange);\n\n  // useEventListener('local-storage', handleStorageChange);\n\n  return [getValue, setValue];\n}\n"],"mappings":";;AAAA,SAASA,WAAT,EAA2CC,MAA3C,QAAyD,OAAzD;AAQA,OAAO,SAASC,eAAT,GAAyC;EAAA;;EAC9C,MAAMC,MAAM,GAAGF,MAAM,CAAS,EAAT,CAArB;EACA,MAAMG,QAAQ,GAAGH,MAAM,CAAS,EAAT,CAAvB;EAEA,MAAMI,QAAQ,GAAGL,WAAW,CAAC,MAAgB;IAC3C,IAAI,OAAOM,MAAP,KAAkB,WAAtB,EAAmC;MACjC,OAAO,IAAP;IACD;;IAED,IAAI;MACF,MAAMC,IAAI,GAAGD,MAAM,CAACE,YAAP,CAAoBC,OAApB,CAA4BN,MAAM,CAACO,OAAnC,CAAb;MACA,OAAOH,IAAI,GAAII,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAJ,GAA6B,IAAxC;IACD,CAHD,CAGE,OAAOM,KAAP,EAAc;MACdC,OAAO,CAACC,IAAR,CAAc,mCAAkCZ,MAAM,CAACO,OAAQ,KAA/D,EAAqEG,KAArE;MACA,OAAO,IAAP;IACD;EACF,CAZ2B,EAYzB,CAACV,MAAM,CAACO,OAAR,EAAiBN,QAAQ,CAACM,OAA1B,CAZyB,CAA5B;EAcA,MAAMM,QAAQ,GAAGhB,WAAW,CAC1B,CAACiB,GAAD,EAAcC,KAAd,KAAgC;IAC9Bf,MAAM,CAACO,OAAP,GAAiBO,GAAjB;IACAX,MAAM,CAACE,YAAP,CAAoBW,OAApB,CAA4BF,GAA5B,EAAiCC,KAAjC;EACD,CAJyB,EAK1B,CAACf,MAAM,CAACO,OAAR,EAAiBN,QAAQ,CAACM,OAA1B,CAL0B,CAA5B,CAlB8C,CA0B9C;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EAEA;;EAEA,OAAO,CAACL,QAAD,EAAWW,QAAX,CAAP;AACD;;GAhDed,e"},"metadata":{},"sourceType":"module"}