{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useRef, useLayoutEffect } from 'react';\nimport { debounce } from '../utils/debounce';\nexport function useDimensions() {\n  _s();\n\n  // setting default values\n  const liveMeasure = true;\n  const delay = 250;\n  const initialDimensions = {};\n  const [dimensions, setDimensions] = useState(initialDimensions);\n  const node = useRef(null); // const [node, setNode] = useState<T | null>(null);\n  // let ref: { a: number } | ((newNode: T) => void) = useCallback((newNode: T) => {\n  //   setNode(newNode);\n  // }, []);\n  // if (ref === {}) ref = { a: 1 };\n\n  useLayoutEffect(() => {\n    if (!node) {\n      return;\n    }\n\n    const measure = () => {\n      window.requestAnimationFrame(() => {\n        const newDimensions = node.getBoundingClientRect();\n        setDimensions(newDimensions);\n      });\n    };\n\n    measure();\n\n    if (liveMeasure) {\n      const debounceMeasure = debounce(measure, delay);\n\n      if ('ResizeObserver' in window) {\n        const resizeObserver = new ResizeObserver(debounceMeasure);\n        resizeObserver.observe(node);\n        window.addEventListener('scroll', debounceMeasure);\n        return () => {\n          resizeObserver.disconnect();\n          window.removeEventListener('scroll', debounceMeasure);\n        };\n      }\n\n      window.addEventListener('resize', debounceMeasure);\n      window.addEventListener('scroll', debounceMeasure);\n      return () => {\n        window.removeEventListener('resize', debounceMeasure);\n        window.addEventListener('scroll', debounceMeasure);\n      };\n    }\n  }, [node, liveMeasure]);\n  return [ref, dimensions, node];\n}\n\n_s(useDimensions, \"TgMvVeZVrAT5piwQFEROxVQWzOY=\");","map":{"version":3,"names":["useState","useRef","useLayoutEffect","debounce","useDimensions","liveMeasure","delay","initialDimensions","dimensions","setDimensions","node","measure","window","requestAnimationFrame","newDimensions","getBoundingClientRect","debounceMeasure","resizeObserver","ResizeObserver","observe","addEventListener","disconnect","removeEventListener","ref"],"sources":["/home/user/Documents/coding/projects/todofeito-app/src/hooks/useDimensions.tsx"],"sourcesContent":["import { useState, useRef, useLayoutEffect, useCallback } from 'react';\nimport { nodeModuleNameResolver } from 'typescript';\nimport { debounce } from '../utils/debounce';\n\nexport function useDimensions<T extends HTMLElement>() {\n  // setting default values\n  const liveMeasure = true;\n  const delay = 250;\n  const initialDimensions = {};\n\n  const [dimensions, setDimensions] = useState(initialDimensions);\n  const node: null | RefObject<T> = useRef<T>(null);\n\n  // const [node, setNode] = useState<T | null>(null);\n\n  // let ref: { a: number } | ((newNode: T) => void) = useCallback((newNode: T) => {\n  //   setNode(newNode);\n  // }, []);\n\n  // if (ref === {}) ref = { a: 1 };\n\n  useLayoutEffect(() => {\n    if (!node) {\n      return;\n    }\n\n    const measure = () => {\n      window.requestAnimationFrame(() => {\n        const newDimensions = node.getBoundingClientRect();\n        setDimensions(newDimensions);\n      });\n    };\n\n    measure();\n\n    if (liveMeasure) {\n      const debounceMeasure = debounce(measure, delay);\n\n      if ('ResizeObserver' in window) {\n        const resizeObserver = new ResizeObserver(debounceMeasure);\n        resizeObserver.observe(node);\n        window.addEventListener('scroll', debounceMeasure);\n\n        return () => {\n          resizeObserver.disconnect();\n          window.removeEventListener('scroll', debounceMeasure);\n        };\n      }\n      window.addEventListener('resize', debounceMeasure);\n      window.addEventListener('scroll', debounceMeasure);\n\n      return () => {\n        window.removeEventListener('resize', debounceMeasure);\n        window.addEventListener('scroll', debounceMeasure);\n      };\n    }\n  }, [node, liveMeasure]);\n\n  return [ref, dimensions, node];\n}\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,MAAnB,EAA2BC,eAA3B,QAA+D,OAA/D;AAEA,SAASC,QAAT,QAAyB,mBAAzB;AAEA,OAAO,SAASC,aAAT,GAAgD;EAAA;;EACrD;EACA,MAAMC,WAAW,GAAG,IAApB;EACA,MAAMC,KAAK,GAAG,GAAd;EACA,MAAMC,iBAAiB,GAAG,EAA1B;EAEA,MAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAACO,iBAAD,CAA5C;EACA,MAAMG,IAAyB,GAAGT,MAAM,CAAI,IAAJ,CAAxC,CAPqD,CASrD;EAEA;EACA;EACA;EAEA;;EAEAC,eAAe,CAAC,MAAM;IACpB,IAAI,CAACQ,IAAL,EAAW;MACT;IACD;;IAED,MAAMC,OAAO,GAAG,MAAM;MACpBC,MAAM,CAACC,qBAAP,CAA6B,MAAM;QACjC,MAAMC,aAAa,GAAGJ,IAAI,CAACK,qBAAL,EAAtB;QACAN,aAAa,CAACK,aAAD,CAAb;MACD,CAHD;IAID,CALD;;IAOAH,OAAO;;IAEP,IAAIN,WAAJ,EAAiB;MACf,MAAMW,eAAe,GAAGb,QAAQ,CAACQ,OAAD,EAAUL,KAAV,CAAhC;;MAEA,IAAI,oBAAoBM,MAAxB,EAAgC;QAC9B,MAAMK,cAAc,GAAG,IAAIC,cAAJ,CAAmBF,eAAnB,CAAvB;QACAC,cAAc,CAACE,OAAf,CAAuBT,IAAvB;QACAE,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCJ,eAAlC;QAEA,OAAO,MAAM;UACXC,cAAc,CAACI,UAAf;UACAT,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCN,eAArC;QACD,CAHD;MAID;;MACDJ,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCJ,eAAlC;MACAJ,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCJ,eAAlC;MAEA,OAAO,MAAM;QACXJ,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCN,eAArC;QACAJ,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCJ,eAAlC;MACD,CAHD;IAID;EACF,CAnCc,EAmCZ,CAACN,IAAD,EAAOL,WAAP,CAnCY,CAAf;EAqCA,OAAO,CAACkB,GAAD,EAAMf,UAAN,EAAkBE,IAAlB,CAAP;AACD;;GAvDeN,a"},"metadata":{},"sourceType":"module"}